Bien s√ªr ‚úÖ Je vais te g√©n√©rer une **documentation bilingue (anglais + fran√ßais)** claire et structur√©e sur ton mod√®le simplifi√©.

---

# üìò Data Model Documentation / Documentation du Mod√®le de Donn√©es

---

## 1. Overview / Vue d‚Äôensemble

**English**
The model describes how **customer profiles** are managed in a KYC (Know Your Customer) system. Each profile may have multiple **data blocks** (static data, documents, KYC, KYT, screening, etc.), which are versioned using an **SCD Type 2 approach** (Block + BlockVersion).
Incoming **hits** (alerts, anomalies, screening results) are linked to the relevant profile and may impact one or several blocks. The system also manages **family relationships** between profiles (co-holders, legal representatives, beneficiaries), with a **remediation status** computed based on specific rules.

**Fran√ßais**
Le mod√®le d√©crit la gestion des **profils clients** dans un syst√®me KYC (*Know Your Customer*). Chaque profil peut avoir plusieurs **blocs de donn√©es** (donn√©es statiques, documents, KYC, KYT, screening‚Ä¶), versionn√©s selon une approche **SCD Type 2** (Block + BlockVersion).
Les **hits** (alertes, anomalies, r√©sultats de screening) sont li√©s au profil concern√© et peuvent impacter un ou plusieurs blocs. Le syst√®me g√®re aussi les **relations familiales** entre profils (co-titulaires, repr√©sentants l√©gaux, b√©n√©ficiaires), avec un **statut de rem√©diation** calcul√© selon certaines r√®gles.

---

## 2. Main Entities / Entit√©s principales

### 2.1 Profile

**EN**

* Represents a customer profile in the KYC system.
* Contains a unique identifier and customer reference.

**FR**

* Repr√©sente un profil client dans le syst√®me KYC.
* Contient un identifiant unique et une r√©f√©rence client.

**Attributes / Attributs**

* `id: String` ‚Äì Unique ID
* `customerRef: String` ‚Äì External reference (e.g., CRM or Core Banking)
* `createdAt: DateTime` ‚Äì Creation date

---

### 2.2 Block

**EN**

* A logical data container for a profile (static data, documents, etc.).
* Each block belongs to one profile.

**FR**

* Un conteneur logique de donn√©es pour un profil (donn√©es statiques, documents‚Ä¶).
* Chaque bloc appartient √† un profil.

**Attributes / Attributs**

* `id: String` ‚Äì Unique ID
* `profile: Profile` ‚Äì Owning profile
* `kind: String` ‚Äì Type (STATIC\_DATA, DOCUMENTS, KYC, KYT, SCREENING, ‚Ä¶)

---

### 2.3 BlockVersion

**EN**

* A version of a block (SCD Type 2).
* Tracks changes, approvals, rejections, and audit trail.

**FR**

* Une version d‚Äôun bloc (SCD Type 2).
* Suit les modifications, validations, rejets et l‚Äôhistorique.

**Attributes / Attributs**

* `id: String`
* `block: Block` ‚Äì Reference to parent block
* `versionNo: int` ‚Äì Version number
* `validFrom / validTo: DateTime` ‚Äì Temporal validity
* `status: String` ‚Äì IN\_REVIEW, APPROVED, REJECTED
* `dataJson: String` ‚Äì JSON payload with block data

---

### 2.4 CurrentBlockV (View)

**EN**

* A database view (or materialized view) exposing only the **current active version** of each block (`valid_to IS NULL`).

**FR**

* Une vue (ou vue mat√©rialis√©e) exposant uniquement la **version active courante** de chaque bloc (`valid_to IS NULL`).

---

### 2.5 Hit

**EN**

* Represents an alert/anomaly/event raised for a profile (e.g., sanction hit, PEP match, KYT anomaly).
* Each hit is linked directly to a profile.
* Can be linked to one or more blocks.

**FR**

* Repr√©sente une alerte/anomalie/√©v√©nement d√©tect√© pour un profil (ex : alerte sanctions, match PEP, anomalie KYT).
* Chaque hit est li√© directement √† un profil.
* Peut √™tre associ√© √† un ou plusieurs blocs.

**Attributes / Attributs**

* `id: String`
* `profile: Profile` ‚Äì Related profile
* `hitType: String` ‚Äì Category of the hit
* `severity: String` ‚Äì Severity (LOW/MED/HIGH)
* `payloadJson: String` ‚Äì Full payload from detection system
* `status: String` ‚Äì OPEN, LINKED, RESOLVED, etc.

---

### 2.6 HitBlockLink

**EN**

* Association table linking hits to the impacted blocks (and optionally to a specific block version under review).

**FR**

* Table d‚Äôassociation reliant les hits aux blocs impact√©s (et √©ventuellement √† une version pr√©cise en cours de revue).

**Attributes / Attributs**

* `hitId: String`
* `blockId: String`
* `blockVersionId: String?` ‚Äì Optional (set if a specific version was created)
* `linkedAt: DateTime`

---

### 2.7 ProfileFamilyLink

**EN**

* Association between a **pivot profile** and a **family member profile**.
* Describes the type of relationship (e.g., co-holder, legal representative).
* Contains remediation status computed based on the family member‚Äôs blocks.

**FR**

* Association entre un **profil pivot** et un **profil membre de famille**.
* D√©crit le type de relation (ex : co-titulaire, repr√©sentant l√©gal).
* Contient un statut de rem√©diation calcul√© sur la base des blocs du membre de famille.

**Attributes / Attributs**

* `id: String`
* `pivot: Profile` ‚Äì The main profile
* `member: Profile` ‚Äì The related profile
* `relationType: String` ‚Äì e.g., CO\_HOLDER, MANDATAIRE
* `remediationStatus: String` ‚Äì PENDING, COMPLETED, BLOCKED, etc.
* `validFrom / validTo: DateTime` ‚Äì Active period of the relation
* `lastEvaluatedAt: DateTime` ‚Äì Last remediation evaluation
* `comment: String?` ‚Äì Optional notes

---

## 3. Relationships / Relations

**English**

* **Profile ‚Üí Blocks**: One profile owns multiple blocks.
* **Block ‚Üí Versions**: Each block has several versions (SCD2).
* **Profile ‚Üí Hits**: Each hit is always attached to a profile.
* **Hit ‚Üî Block**: Many-to-many association (a hit can impact multiple blocks).
* **Profile ‚Üî Profile (Family)**: Family relations modeled via `ProfileFamilyLink` (pivot ‚Üî member).

**Fran√ßais**

* **Profil ‚Üí Blocs** : Un profil poss√®de plusieurs blocs.
* **Bloc ‚Üí Versions** : Chaque bloc a plusieurs versions (SCD2).
* **Profil ‚Üí Hits** : Chaque hit est toujours rattach√© √† un profil.
* **Hit ‚Üî Bloc** : Relation plusieurs-√†-plusieurs (un hit peut impacter plusieurs blocs).
* **Profil ‚Üî Profil (Famille)** : Relations familiales mod√©lis√©es via `ProfileFamilyLink` (pivot ‚Üî membre).

---

## 4. Usage Scenarios / Sc√©narios d‚Äôutilisation

**EN**

1. A new hit is detected for a profile ‚Üí stored in `HITS` with link to the profile.
2. The hit impacts a block ‚Üí a record in `HIT_BLOCK_LINKS` is created (optionally linked to a new `BlockVersion`).
3. The agent works on the **current block versions** (`CurrentBlockV`) and resolves the hit.
4. Family links (`ProfileFamilyLink`) are used to compute remediation status: e.g., a co-holder‚Äôs screening or documents may affect the pivot profile‚Äôs risk.

**FR**

1. Un nouveau hit est d√©tect√© pour un profil ‚Üí enregistr√© dans `HITS` avec lien vers le profil.
2. Le hit impacte un bloc ‚Üí cr√©ation d‚Äôun enregistrement dans `HIT_BLOCK_LINKS` (optionnellement li√© √† une nouvelle `BlockVersion`).
3. L‚Äôagent travaille sur les **versions courantes** (`CurrentBlockV`) et r√©sout le hit.
4. Les liens familiaux (`ProfileFamilyLink`) sont utilis√©s pour calculer le statut de rem√©diation : ex. le screening ou les documents d‚Äôun co-titulaire peuvent influencer le risque du profil pivot.

---

üëâ Veux-tu que je mette cette documentation dans un **fichier PDF** (anglais + fran√ßais c√¥te √† c√¥te) pour que tu puisses l‚Äôutiliser comme **r√©f√©rence officielle** dans ton projet ?
